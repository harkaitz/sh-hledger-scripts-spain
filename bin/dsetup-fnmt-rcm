#!/bin/sh -e
##:
#h: Usage: dsetup-fnmt-rcm -d (Download) i (Install)
#h:
#h: Download ans install FNMT's (Fabrica Nacional de Moneda y Timbre)
#h: digital certificate generation app for Debian Linux.
#h:
#h: Once installed you will be able to ask for a certificate using
#h: Google Chrome of Firefox.
##:
dsetup_fnmt_rcm() {
    local ANS
    case "$1" in -*d*) configuradorfnmt_download_ANS; echo "${ANS}";; esac
    case "$1" in -*i*) configuradorfnmt_install;; esac
}
## -------------------------------------------------------------------
configuradorfnmt_install() {
    local ANS
    configuradorfnmt_download_ANS
    sudo apt-get install "${ANS}"
}
configuradorfnmt_download_ANS() {
    local u='https://descargas.cert.fnmt.es/Linux/configuradorfnmt_4.0.6_amd64.deb'
    local i="${DDIR:-${TEMP:-/tmp}}/$(basename "${u}")"
    if test ! -f "${i}"; then
        wget -O "${i}.tmp" "${u}"
        mv -v "${i}.tmp" "${i}"
    fi
    ANS="${i}"
}
## -------------------------------------------------------------------
if test @"${SCRNAME:-$(basename "$0")}" = @"dsetup-fnmt-rcm"; then
    case "${1}" in
        ''|-h|--help) sed -n 's/^ *#h: \{0,1\}//p' "$0";;
        *)            dsetup_fnmt_rcm "$@"; exit 0;;
    esac
fi
# References:
# (1) https://www.sede.fnmt.gob.es/descargas/descarga-software/instalacion-software-generacion-de-claves
